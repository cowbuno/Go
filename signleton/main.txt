package main

import "fmt"
import "sync"

var lock := &sync.Mutex{}

type Single struct{}

var singleInstance *Single

func GetInstance() *Single{
    if singleInstance == nil{
        lock.lock
        defer.Unlock()
        singleInstance = &Single
        fmt.Println("creating single instance now")
    }else{
        fmt.Println("single is created")
    }

    return singleInstance
}

func main(){
    for i:=0 ; i< 10; i++{
        go GetInstance()
    }

    fmt.Scanln()
}